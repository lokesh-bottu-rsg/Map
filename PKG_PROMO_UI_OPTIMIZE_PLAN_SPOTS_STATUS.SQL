CREATE OR REPLACE PROCEDURE PKG_PROMO_UI_OPTIMIZE_PLAN_SPOTS_STATUS(
    IN_PLAN_ID INT
)
RETURNS VARCHAR(10)
LANGUAGE SQL AS 
DECLARE V_PLAN_STATUS_S INT;
BEGIN

    SELECT PLAN_STATUS_ID INTO :V_PLAN_STATUS_S FROM REF_PLAN_STATUS WHERE CODE = 'S' limit 1;
    
    UPDATE PR_PLAN SET PLAN_STATUS_ID = :V_PLAN_STATUS_S, SCHEDULE_DT = CURRENT_TIMESTAMP() WHERE PLAN_ID = :IN_PLAN_ID;
    
RETURN 'SUCCESS'; 
END;

GRANT USAGE ON PROCEDURE PKG_PROMO_UI_OPTIMIZE_PLAN_SPOTS_STATUS(INT) TO ROLE RA_PROMO_DEV_QA_UAT_ACCESS;
GRANT USAGE ON PROCEDURE PKG_PROMO_UI_OPTIMIZE_PLAN_SPOTS_STATUS(INT) TO ROLE RA_PROMO_PROD_ACCESS;